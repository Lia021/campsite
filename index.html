
<!DOCTYPE html>
<html>
 
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
 
    <script src="https://cdn.rawgit.com/AltspaceVR/AltspaceSDK/v2.4.1/dist/altspace.min.js"></script>
    <script>
      altspace.getThreeJSTrackingSkeleton().then(function(skeleton) {
        window.head = skeleton.getJoint('Head');
      });
 
      AFRAME.registerComponent('altspace-look-at', {
        init: function () {
          if(!window.altspace || !altspace.inClient) return;
        },
        tick: function () {
          if(!window.head || !this.el.object3D) return;
          this.el.object3D.lookAt(window.head.position); 
        }
      });
    </script>
    <script>
      // n-skeleton-parent only works with root meshes at the moment. Since most model loaders use a root
      // container object, we need to collapse the model so that n-skeleton-parent can access the mesh directly.
      AFRAME.registerComponent('collapse-model', {
        init: function () {
          this.el.addEventListener('model-loaded', function () {
            this.el.object3DMap.mesh.updateMatrixWorld();
 
            var mesh;
            this.el.object3DMap.mesh.traverse(function (obj) {
              if(!mesh && obj instanceof THREE.Mesh) mesh = obj;
 
 
            }.bind(this));
 
            if(mesh) {
              mesh.scale.copy(mesh.getWorldScale());
              this.el.setObject3D('mesh', mesh);
              // setObject3D emits this event in a-frame 0.4.0
              this.el.emit('object3dset', {
                type: 'mesh'
              });
            }
          }.bind(this));
        }
      });
    </script>
  </head>
  <body>
    <a-scene altspace="fullspace:true" sync-system="author: bookgirl; app: campfire">
 
      <a-assets>
        <a-asset-item id="grill" src="https://rawgit.com/Lia021/montreal/master/grill2/untitled.dae"></a-asset-item>
        <a-asset-item id="pighead" src="https://rawgit.com/Lia021/montreal/master/pig%20head%202/pig%20head%202.dae"></a-asset-item>
        <a-asset-item id="tent" src="https://rawgit.com/Lia021/montreal/master/tent/untitled.dae"></a-asset-item>
        <a-asset-item id="space-table" src="https://rawgit.com/Lia021/montreal/master/table%204/untitled.dae"></a-asset-item>
        <a-asset-item id="cup" src="https://rawgit.com/Lia021/claire-campfire/master/can/can.dae"></a-asset-item>
        <a-asset-item id="plate" src="https://rawgit.com/Lia021/montreal/master/plate%202/plate%20%202.dae"></a-asset-item>
        <a-asset-item id="tree" src="https://rawgit.com/Lia021/montreal/master/tree%20house/untitled.dae"></a-asset-item>
        <a-asset-item id="knife" src="https://rawgit.com/Lia021/montreal/master/knife%202/knife%206.dae"></a-asset-item>
        <a-asset-item id="happy-hat" src="https://rawgit.com/Lia021/claire-campfire/master/happy%20hat/happy%20hat.dae"></a-asset-item>
        <a-asset-item id="camp" src="https://rawgit.com/Lia021/claire-campfire/master/hamak/hamak.dae"></a-asset-item>
        <a-asset-item id="test2" src="https://rawgit.com/Lia021/montreal/master/test2/untitled.dae"></a-asset-item>
        <a-asset-item id="island2" src="https://rawgit.com/Lia021/montreal/master/test4/untitled.dae"></a-asset-item>
        <a-asset-item id="platfrom" src="https://rawgit.com/Lia021/montreal/master/platfrom%20island/untitled.dae"></a-asset-item>
        <a-asset-item id="plat2" src="https://rawgit.com/Lia021/montreal/master/plat2/untitled.dae"></a-asset-item>
        <a-asset-item id="plat3" src="https://rawgit.com/Lia021/montreal/master/plat3/untitled.dae"></a-asset-item>
        <a-asset-item id="frog" src="https://rawgit.com/Lia021/campsite/master/frog/frog%202.dae"></a-asset-item>
        <a-asset-item id="made" src="https://rawgit.com/Lia021/campsite/master/island%20made/untitled.dae"></a-asset-item>
        <a-asset-item id="pig-melon" src="https://rawgit.com/Lia021/claire-campfire/master/pigmelon/pig-melon.dae"></a-asset-item>
        <a-asset-item id="screan" src="https://rawgit.com/Lia021/campsite/master/srean/screan.dae"></a-asset-item>  
       <a-asset-item id="projecter" src="https://rawgit.com/Lia021/campsite/master/projecter/projecter.dae"></a-asset-item>
       <a-asset-item id="weel" src="https://rawgit.com/Lia021/campsite/master/projecter/weel.dae"></a-asset-item>  



      </a-assets>
 
 
 <a-mixin id="knife" collada-model="#knife" collapse-model></a-mixin>
 
<<<<<<< HEAD
      <a-mixin id="knife" collada-model="#knife" collapse-model></a-mixin>
 
      <a-mixin id="parent-to-right-hand" position="-0.10 -0.04 -0.15" rotation="-90 90 0" n-skeleton-parent="part: hand; side: right;" sync sync-n-skeleton-parent></a-mixin>
 
  <a-mixin id="cup" collada-model="#cup" collapse-model></a-mixin>
=======
      <a-mixin id="parent-to-right-hand" position="-0.10 -0.04 -0.15" rotation="-90 90 0" n-skeleton-parent="part: hand; side: right;" sync sync-n-skeleton-parent></a-mixin>
      
<a-mixin id="pink" collada-model="#pink" collapse-model></a-mixin>
>>>>>>> origin/master
 
      <a-mixin id="parent-to-left-hand"scale="1.20 1.20 1.20" position="0.07 -0.04 -0.09" rotation="-90 -90 0" n-skeleton-parent="part: hand; side: left;" sync sync-n-skeleton-parent></a-mixin>

      <a-mixin id="happy-hat" collada-model="#happy-hat" collapse-model></a-mixin>
 
      <a-mixin id="parent-to-head"scale="1.30 1.30 1.30" position="0 0.12 0.02" rotation="0 90 0" n-skeleton-parent="part:head;" sync sync-n-skeleton-parent></a-mixin>
 
 
 
      <!--sky-->
      <a-sky radius="400" src="https://i.imgur.com/JaI0qA5.jpg"></a-sky>
 
      <!--grill-->
 
      <a-entity position="3.80 -3.80 -2.70" scale="3 1.50 3" n-mesh-collider="type: environment; convex: false" collada-model="#grill"></a-entity>
 
      <!--pighead 1-->
 
      <a-entity position="3.30 -3.30 -2.40" scale="1.50 1.50 1.50" collada-model="#pighead"></a-entity>
 
      <!--tent-->
 
      <a-entity position="5 -3.30 -13" rotation="0 90 0" n-mesh-collider="type: environment; convex: false" collada-model="#tent"></a-entity>
 
      <!--table-->
 
      <a-entity position="5 -3.30 -13" scale="2 1 2" rotation="0 90 0" n-mesh-collider="type: environment; convex: false" collada-model="#space-table"></a-entity>
 
      <!--plate-->
      <a-entity position="5 -2.57 -13" n-mesh-collider="type: environment; convex: false" collada-model="#plate"></a-entity>
 
      <!--pigmelon-->
 
      <a-entity position="4.98 -2.58 -13.02" scale="2 2 2" rotation="0 -90 0" n-mesh-collider="type: environment; convex: false" collada-model="#pig-melon"></a-entity>
 
      <!--can-->
 
      <a-entity position="4 -2.40 -13" scale="1.50 1.50 1.50"mixin="cup"instantiator="on: click;group: cup; mixin: cup parent-to-left-hand"></a-entity>

      <!--can2-->

      <a-entity position="7 -2.58 -13" scale="2.30 2.30 2.30"n-mesh-collider="type: environment; convex: false" collada-model="#cup"></a-entity>
 
      <!--tree house-->
 
      <a-entity position="22 -1 -1" scale="2.50 2 2" rotation="0 -90 0" n-mesh-collider="type: environment; convex: false" collada-model="#tree"></a-entity>
 
       <!--knife-->
 
      <a-entity position="6 -2.55 -13" mixin="knife" rotation="90 0 0" instantiator="on: click;group: knife; mixin: knife parent-to-right-hand"></a-entity>
 
 
      <!--pink hat-->
      <a-entity position="-0.50 -2.51 -7.50" scale="1.20 1.20 1.20"mixin="happy-hat" instantiator="on: click;group: happy-hat; mixin: happy-hat parent-to-head"></a-entity>
 
      <!--hamak-->
 
      <a-entity position="22 2.22 -2" scale="8 8 8" rotation="0 -90 0" n-mesh-collider="type: environment; convex: false" collada-model="#camp"></a-entity>
 
     
      <!--small island 1-->
       <a-entity position="-68 -8.50 18" scale="8 4 6"  n-mesh-collider="type: environment; convex: false" collada-model="#made"></a-entity>
    
      
      <!--small island 2 -->
       <a-entity position="-51 -7.50 -22" scale="6 2 5"  n-mesh-collider="type: environment; convex: false" collada-model="#made"></a-entity>
  
      <!--small island 3-->
       <a-entity position="-35 -10 50" scale="6 2 5"  n-mesh-collider="type: environment; convex: false" collada-model="#made"></a-entity>
    
      <!-- bridge 1-->
      <a-box position="-20 -5 5" rotation="90 0 75" src="https://rawgit.com/Lia021/montreal/master/wood-textures-high-quality-2.jpg" n-mesh-collider="type: environment; convex: false" depth="0.3" height="24" width="5"></a-box>
      <a-box position="-43.70 -5 11.40" rotation="90 0 75" src="https://rawgit.com/Lia021/montreal/master/wood-textures-high-quality-2.jpg" n-mesh-collider="type: environment; convex: false" depth="0.3" height="25" width="5"></a-box> 
 
      <!--bridge 2-->
      <a-box position="-19.20 -6 -29" rotation="90 0 75" src="https://rawgit.com/Lia021/montreal/master/wood-textures-high-quality-2.jpg" n-mesh-collider="type: environment; convex: false" depth="0.3" height="24" width="5"></a-box>
      <a-box position="-35.64 -6 -24.60" rotation="90 0 75" src="https://rawgit.com/Lia021/montreal/master/wood-textures-high-quality-2.jpg" n-mesh-collider="type: environment; convex: false" depth="0.3" height="10" width="5"></a-box> 
 
      <!--boxground-->
      
       <a-box position="30 -0.50 10" rotation="90 0 40"src="https://rawgit.com/Lia021/montreal/master/wood-textures-high-quality-2.jpg" n-mesh-collider="type: environment; convex: false" depth="0.3" height="6" width="6"></a-box>

      <!--screen-->
      
    <a-entity position="16 -2 7" scale="8 13 15" rotation="0 142 0" n-mesh-collider="type: environment; convex: false" collada-model="#screan"></a-entity>   

    <!--projecter-->
      
    <a-entity position="7.60 -3.25 0.40" scale="3 3 3" rotation="0 -42 0" n-mesh-collider="type: environment; convex: false" collada-model="#projecter"></a-entity>   

    <!--weel-->
      
    <a-entity position="7.71 -2.70 0.52" scale="2.90 2.90 2.90" rotation="0 -42 0" n-mesh-collider="type: environment; convex: false" collada-model="#weel"></a-entity>   

   <!--weel-->
      
    <a-entity position="7.50 -2.70 0.28" scale="2.90 2.90 2.90" rotation="0 -42 0" n-mesh-collider="type: environment; convex: false" collada-model="#weel"></a-entity>   


    <!-- Basic cone. -->
<a-cone color="yellow" opacity="0.3"position="8.18 -2.88 0.95" radius-bottom="0.60" height="1"rotation="-90 45 0"radius-top="0.04"><a-animation attribute="position" direction='alternate' from="8.18 -2.88 0.95" to="8.18 -2.88 1" ease-in-out='linear' dur='1999' repeat='indefinite' /></a-cone>

    <!-- Basic cone. -->
<a-cone color="white" opacity="0.3"position="8.18 -2.88 0.95" radius-bottom="0.61" height="1"rotation="-90 45 0"radius-top="0.04"><a-animation attribute="position" direction='alternate' from="8.18 -2.88 0.95" to="8.18 -2.88 1" ease-in-out='linear' dur='1999' repeat='indefinite' /></a-cone>


      <!--campfire song-->
 
      <a-entity position="7.50 -3.90 -1">
        <a-entity id="pc-campfire"sync="own-on: campfire" sync-n-sound n-sound="on:campfire; src:https://cdn.rawgit.com/Lia021/sound/master/The_Campfire_Song_Song_-_The_Campfire_Song_Song.ogg;"></a-entity>
        <a-entity id="gear-campfire"sync="own-on: campfire" sync-n-sound n-sound="on:campfire; src:https://cdn.rawgit.com/Lia021/sound/master/The%20Campfire%20Song%20Song%20-%20The%20Campfire%20Song%20Song.mp3;"></a-entity>
        <a-entity wire="on: click; emit: campfire; targets: #pc-campfire, #gear-campfire;" rotation="0 140 0" collada-model="#frog"></a-entity>
      </a-entity>
      
       <!--portal-->
     
	<a-entity position='0 -3.35 -20' rotation='0 90 0' n-portal='targetSpace: event-652146735728034471'></a-entity>
      
    </a-scene>
  </body>
</html>
